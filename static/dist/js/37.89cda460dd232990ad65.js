webpackJsonp([37],{PtEE:function(t,e){},YZfs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Dd8w"),n=a.n(o),r={data:function(){return{maxTableHeight:"",auth:{},tableLoading:!1,tableList:[],agentStatusList:[{key:"未知",value:2},{key:"在线",value:1},{key:"离线",value:0}],runSysList:[],isDropdownShow:!1,searchFrom:{name:"",ip:"",is_online:"",category:"",os:""},pagination:{current:1,count:1,limit:10}}},created:function(){this.getRunSysList(),this.handleLoad(),this.auth=this.hasPerm(this.$route.path),this.maxTableHeight=this.$store.state.common.defaultTableHeight-52},methods:{handleLoad:function(){var t=this;this.tableLoading=!0,this.$api.stationState.list(n()({},this.searchFrom,{page:this.pagination.current,page_size:this.pagination.limit})).then(function(e){e.result?(t.pagination.count=e.data.count,t.tableList=e.data.items):t.$cwMessage(e.message,"error"),t.tableLoading=!1})},handlePageLimitChange:function(t){this.pagination.current=1,this.pagination.limit=t,this.handleLoad()},handlePageChange:function(t){this.pagination.current=t,this.handleLoad()},handleSearch:function(){this.pagination.current=1,this.handleLoad()},handleOpenSeniorSearch:function(){this.isDropdownShow=!this.isDropdownShow},handleReset:function(){this.searchFrom={name:"",ip:"",is_online:"",category:"",os:""}},getRunSysList:function(){this.runSysList=[]}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"agengtMonitor"}},[t.auth.search?a("div",{staticClass:"header"},[a("div",{staticStyle:{float:"left"}},[a("bk-input",{staticStyle:{width:"240px","margin-right":"8px"},attrs:{clearable:"",width:"240px",placeholder:"请输入Agent名称","right-icon":"bk-icon icon-search"},on:{"right-icon-click":t.handleSearch,enter:t.handleSearch},model:{value:t.searchFrom.name,callback:function(e){t.$set(t.searchFrom,"name",e)},expression:"searchFrom.name"}}),t._v(" "),a("bk-button",{attrs:{slot:"dropdown-trigger","ext-cls":"",theme:!0===t.isDropdownShow?"primary":"default","icon-right":!0===t.isDropdownShow?"angle-double-up":"angle-double-down"},on:{click:t.handleOpenSeniorSearch},slot:"dropdown-trigger"},[t._v("高级搜索")])],1),t._v(" "),t.isDropdownShow?a("div",{staticClass:"senior-search-box"},[a("bk-container",{attrs:{margin:0}},[a("bk-form",{attrs:{"label-width":100}},[a("bk-row",[a("bk-col",{attrs:{span:6}},[a("bk-form-item",{attrs:{label:"Agent:"}},[a("bk-input",{attrs:{placeholder:"请输入Agent",clearable:""},model:{value:t.searchFrom.name,callback:function(e){t.$set(t.searchFrom,"name",e)},expression:"searchFrom.name"}})],1)],1),t._v(" "),a("bk-col",{attrs:{span:6}},[a("bk-form-item",{attrs:{label:"IP:"}},[a("bk-input",{attrs:{placeholder:"请输入IP",clearable:""},model:{value:t.searchFrom.ip,callback:function(e){t.$set(t.searchFrom,"ip",e)},expression:"searchFrom.ip"}})],1)],1),t._v(" "),a("bk-col",{attrs:{span:6}},[a("bk-form-item",{attrs:{label:"Agent状态:"}},[a("bk-select",{staticStyle:{"background-color":"#fff"},attrs:{clearable:!0,placeholder:"请选择"},model:{value:t.searchFrom.is_online,callback:function(e){t.$set(t.searchFrom,"is_online",e)},expression:"searchFrom.is_online"}},t._l(t.agentStatusList,function(t,e){return a("bk-option",{key:e,attrs:{id:t.value,name:t.key}})}),1)],1)],1),t._v(" "),a("bk-col",{attrs:{span:6}},[a("bk-form-item",{attrs:{label:"跑批系统:"}},[a("bk-select",{staticStyle:{"background-color":"#fff"},attrs:{clearable:!0,placeholder:"请选择"},model:{value:t.searchFrom.category,callback:function(e){t.$set(t.searchFrom,"category",e)},expression:"searchFrom.category"}},t._l(t.runSysList,function(t,e){return a("bk-option",{key:e,attrs:{id:t.id,name:t.name}})}),1)],1)],1)],1),t._v(" "),a("bk-row",{staticStyle:{"margin-top":"20px"}},[a("bk-col",{attrs:{span:6}},[a("bk-form-item",{attrs:{label:"操作系统"}},[a("bk-input",{attrs:{placeholder:"请输入操作系统",clearable:""},model:{value:t.searchFrom.os,callback:function(e){t.$set(t.searchFrom,"os",e)},expression:"searchFrom.os"}})],1)],1)],1),t._v(" "),a("bk-row",{staticStyle:{display:"flex","justify-content":"center","margin-top":"20px"}},[a("bk-button",{attrs:{theme:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),a("bk-button",{staticStyle:{"margin-left":"8px"},on:{click:t.handleReset}},[t._v("重置")]),t._v(" "),a("bk-button",{staticStyle:{"margin-left":"8px"},on:{click:t.handleOpenSeniorSearch}},[t._v("取消")])],1)],1)],1)],1):t._e()]):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"content"},[a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.tableLoading,zIndex:10},expression:"{ isLoading: tableLoading, zIndex: 10 }"}],ref:"table",attrs:{data:t.tableList,pagination:t.pagination,"ext-cls":"customTable","max-height":t.maxTableHeight},on:{"page-change":t.handlePageChange,"page-limit-change":t.handlePageLimitChange}},[a("bk-table-column",{attrs:{label:"Agent名称",prop:"name"}}),t._v(" "),a("bk-table-column",{attrs:{label:"所属业务",prop:"biz","show-overflow-tooltip":!0}}),t._v(" "),a("bk-table-column",{attrs:{label:"IP",prop:"ip"}}),t._v(" "),a("bk-table-column",{attrs:{label:"跑批系统",prop:"category",sortable:"","show-overflow-tooltip":!0}}),t._v(" "),a("bk-table-column",{attrs:{label:"操作系统",prop:"os",sortable:"","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(""===e.row.os?"- -":e.row.os))])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"Agent状态",prop:"is_online",sortable:"","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.is_online?a("div",[a("div",{staticClass:"status-btn",staticStyle:{"background-color":"#2DCB56"}}),a("span",[t._v("在线")])]):0===e.row.is_online?a("div",[a("div",{staticClass:"status-btn",staticStyle:{"background-color":"#EA3636"}}),a("span",[t._v("离线")])]):2===e.row.is_online?a("div",[a("div",{staticClass:"status-btn",staticStyle:{"background-color":"#c4c6cc"}}),a("span",[t._v("未知")])]):t._e()]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"Agent连接时长",prop:"duration",sortable:"","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(""===e.row.duration||null===e.row.duration?"- -":e.row.duration))])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"CPU使用率(%)",prop:"cpu_usage",sortable:"","show-overflow-tooltip":!0}}),t._v(" "),a("bk-table-column",{attrs:{label:"内存使用率(%)",prop:"mem_usage",sortable:"","show-overflow-tooltip":!0}})],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(r,s,!1,function(t){a("PtEE")},"data-v-0e75a6ff",null);e.default=i.exports}});